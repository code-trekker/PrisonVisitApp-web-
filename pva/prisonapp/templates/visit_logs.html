<!DOCTYPE html>
<html lang="en">
<head>

    <title>Admin Visitation Logs</title>
    <link href="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.0/css/bootstrap.min.css" rel="stylesheet">
    <script language="JavaScript" src="https://code.jquery.com/jquery-1.11.1.min.js" type="text/javascript"></script>
    <script language="JavaScript" src="https://cdn.datatables.net/1.10.4/js/jquery.dataTables.min.js" type="text/javascript"></script>
    <script language="JavaScript" src="https://cdn.datatables.net/plug-ins/3cfcc339e89/integration/bootstrap/3/dataTables.bootstrap.js" type="text/javascript"></script>
    <link rel="stylesheet" type="text/css" href="http://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap.min.css">
    <link rel="stylesheet" type="text/css" href="http://cdn.datatables.net/plug-ins/3cfcc339e89/integration/bootstrap/3/dataTables.bootstrap.css">

    <script>

        var tokens = localStorage.getItem('token');
        $(document).ready(
            function viewAll(){
                table();
                viewVis();
                showRes();
            })

        function viewVis(){
            $("#view_id").show();

            $.ajax({
                url: 'http://127.0.0.1:5000/api/admin/visit_logs',
                type: "GET",
                dataType: "json",
                crossDomain: true,
                headers: {
                    'x-access-token': tokens
                },
                success: function(resp) {
                    if (resp.status  === 'ok') {
                        for (i = 0; i < resp.count; i++) {

                            fname = resp.entries[i].fname;
                            mname = resp.entries[i].mname;
                            lname = resp.entries[i].lname;
                            inmate = resp.entries[i].inmate;
                            date = resp.entries[i].date;

                            $("#view_id").append(showRes(fname, mname, lname, inmate, date));

                        }
                    } else {
                        $("#view_id").html("");
                        alert('No Data')
                    }
                }
            });
        }

        function showRes(fname, mname, lname, inmate, date) {
            return '<div class="widget stacked widget-table action-table">' +
                '<div class="widget-content">' +
                '<table class="table table-striped table-bordered" id="view_res">' +
                '<tbody><tr class="edit" id="details">' +
                '<td width=10%>' + fname + '</td>' +
                '<td width=5%>' + mname + '</td>' +
                '<td width=10%>' + lname + '</td>' +
                '<td width=10%>' + inmate + '</td>' +
                '<td width=10%>' + date + '</td>' +
                '</tr></tbody>' +
                '</table>' +
                '</div>'
        }

        function table() {
            $("table.table-bordered").html('<thead><tr>' +
                '<th width=10%>First Name</th>' +
                '<th width=5%>M.I.</th>' +
                '<th width=10%>Last Name</th>' +
                '<th width=10%>Prisoner Name</th>' +
                '<th width=10%>Date & Time</th>' +
                '</tr></thead>')
}
    </script>

    <style type="text/css">
        .pagination>li {
            display: inline;
            border:none !important;
        }
        iframe {
            height:700px !important;
        }
    </style>
</head>


<body>
<div class="container">
    <div class="row">
        <h2 class="text-center">Visitation Logs</h2>
    </div>

    <div class="container">
        <div class="row">
            <div class="widget stacked widget-table action-table">
                <div class="widget-content">
                    <table class="table table-striped table-bordered">

                    </table>
                </div>
                <div id="view_id"></div>
            </div>
        </div>
    </div>

</div>
</body>
</html>